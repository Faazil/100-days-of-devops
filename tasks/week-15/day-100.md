# Day 100: Create and Configure Alarm Using CloudWatch Using Terraform

## Task Overview

Provision AWS VPC infrastructure using Terraform. Define network topology as code for reproducible cloud deployments.

**VPC Provisioning:**
- Write Terraform configuration
- Define VPC and subnets
- Configure routing and gateways
- Apply infrastructure changes

**Lab:** [KodeKloud Engineer Platform](https://engineer.kodekloud.com/practice)

---

## Solution Steps

**Step 1:** Define AWS resource configuration in Terraform.

```hcl
variable "prefix" {
        default = "nautilus"
    }
```

**Step 2:** Define AWS resource configuration in Terraform.

```hcl
resource "aws_sns_topic" "sns_topic" {
        name = "${var.prefix}-sns-topic"
    }

    resource "aws_instance" "ec2_instance" {
        ami = "ami-0c02fb55956c7d316"
        instance_type = "t2.micro"

        tags = {
            Name = "${var.prefix}-ec2"
        }
    }

    resource "aws_cloudwatch_metric_alarm" "cw_alarm" {
        alarm_name = "${var.prefix}-alarm"
        comparison_operator = "GreaterThanOrEqualToThreshold"
        evaluation_periods = 1
        metric_name = "CPUUtilization"
        namespace = "AWS/EC2"
        period = 300
        statistic = "Average"
        threshold = 90

        dimensions = {
            InstanceId = aws_instance.ec2_instance.id
        }

        alarm_actions = [aws_sns_topic.sns_topic.arn]
    }
```

**Step 3:** Define AWS resource configuration in Terraform.

```hcl
output "KKE_instance_name" {
        value = aws_instance.ec2_instance.tags["Name"]
    }

    output "KKE_alarm_name" {
        value = aws_cloudwatch_metric_alarm.cw_alarm.alarm_name
    }
```

**Step 4:** Initialize Terraform working directory and download providers.

```sh
terraform init
    terraform plan
    terraform apply -auto-approve
```

---

## Validation

Test your solution using KodeKloud's automated validation.

---

[‚Üê Day 99](day-99.md) | 

**Source:** [100 Days of DevOps](https://engineer.kodekloud.com/practice/100-days-of-devops)
